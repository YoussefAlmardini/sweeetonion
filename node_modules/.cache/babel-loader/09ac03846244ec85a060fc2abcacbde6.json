{"remainingRequest":"D:\\projects\\sweeetonion\\node_modules\\babel-loader\\lib\\index.js!D:\\projects\\sweeetonion\\src\\store\\index.js","dependencies":[{"path":"D:\\projects\\sweeetonion\\src\\store\\index.js","mtime":1593598391043},{"path":"D:\\projects\\sweeetonion\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projects\\sweeetonion\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKaW1wb3J0IGRiIGZyb20gIi4uL2ZpcmViYXNlL2luaXQuanMiOwpWdWUudXNlKFZ1ZXgpOwpleHBvcnQgZGVmYXVsdCBuZXcgVnVleC5TdG9yZSh7CiAgc3RhdGU6IHsKICAgIHZlcnNpb246IG51bGwsCiAgICBpc01vYmlsZTogbnVsbCwKICAgIHVzZXJSb2xlOiBudWxsLAogICAgdXNlcklkOiBudWxsLAogICAgdXNlckZpcnN0TmFtZTogbnVsbCwKICAgIHVzZXJMYXN0TmFtZTogbnVsbCwKICAgIGF1dGhlbnRpY2F0ZWQ6IGZhbHNlCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFVzZXI6IGZ1bmN0aW9uIHNldFVzZXIoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUudXNlckZpcnN0TmFtZSA9IHBheWxvYWQuZmlyc3ROYW1lOwogICAgICBzdGF0ZS51c2VyTGFzdE5hbWUgPSBwYXlsb2FkLmxhc3ROYW1lOwogICAgICBzdGF0ZS51c2VyUm9sZSA9IHBheWxvYWQucm9sZTsKICAgICAgc3RhdGUudXNlcklkID0gcGF5bG9hZC5pZDsKICAgICAgc3RhdGUuYXV0aGVudGljYXRlZCA9IHRydWU7CiAgICB9LAogICAgdW5zZXRVc2VyOiBmdW5jdGlvbiB1bnNldFVzZXIoc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUudXNlckZpcnN0TmFtZSA9IG51bGw7CiAgICAgIHN0YXRlLnVzZXJMYXN0TmFtZSA9IG51bGw7CiAgICAgIHN0YXRlLnVzZXJSb2xlID0gbnVsbDsKICAgICAgc3RhdGUudXNlcklkID0gbnVsbDsKICAgICAgc3RhdGUuYXV0aGVudGljYXRlZCA9IGZhbHNlOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHBheWxvYWQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQocGF5bG9hZC5lbWFpbCwgcGF5bG9hZC5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAoYXV0aCkgewogICAgICAgIGNvbnNvbGUubG9nKGF1dGgpOwogICAgICAgIGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKGF1dGgudXNlci51aWQpLmdldCgpLnRoZW4oZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgdmFyIG5ld1VzZXIgPSBkb2MuZGF0YSgpOwogICAgICAgICAgbmV3VXNlci5pZCA9IGRvYy5pZDsKICAgICAgICAgIGNvbW1pdCgic2V0VXNlciIsIG5ld1VzZXIpOwogICAgICAgIH0pOwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByb3V0ZXIucmVwbGFjZSgiLyIpOwogICAgICB9KTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMiwgcGF5bG9hZCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGNvbW1pdCgidW5zZXRVc2VyIik7CiAgICAgICAgcm91dGVyLnJlcGxhY2UoIi9sb2dpbiIpOwogICAgICB9KTsKICAgIH0KICB9Cn0pOw=="},{"version":3,"sources":["D:/projects/sweeetonion/src/store/index.js"],"names":["Vue","Vuex","router","firebase","db","use","Store","state","version","isMobile","userRole","userId","userFirstName","userLastName","authenticated","mutations","setUser","payload","firstName","lastName","role","id","unsetUser","actions","login","commit","auth","signInWithEmailAndPassword","email","password","then","console","log","collection","doc","user","uid","get","newUser","data","replace","logout","signOut"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAOC,EAAP,MAAe,qBAAf;AAEAJ,GAAG,CAACK,GAAJ,CAAQJ,IAAR;AAEA,eAAe,IAAIA,IAAI,CAACK,KAAT,CAAe;AAC5BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAC,IADH;AAELC,IAAAA,QAAQ,EAAC,IAFJ;AAGLC,IAAAA,QAAQ,EAAE,IAHL;AAILC,IAAAA,MAAM,EAAE,IAJH;AAKLC,IAAAA,aAAa,EAAC,IALT;AAMLC,IAAAA,YAAY,EAAC,IANR;AAOLC,IAAAA,aAAa,EAAC;AAPT,GADqB;AAW5BC,EAAAA,SAAS,EAAE;AAEVC,IAAAA,OAFU,mBAEFT,KAFE,EAEIU,OAFJ,EAEY;AACrBV,MAAAA,KAAK,CAACK,aAAN,GAAsBK,OAAO,CAACC,SAA9B;AACAX,MAAAA,KAAK,CAACM,YAAN,GAAqBI,OAAO,CAACE,QAA7B;AACAZ,MAAAA,KAAK,CAACG,QAAN,GAAiBO,OAAO,CAACG,IAAzB;AACAb,MAAAA,KAAK,CAACI,MAAN,GAAeM,OAAO,CAACI,EAAvB;AACAd,MAAAA,KAAK,CAACO,aAAN,GAAsB,IAAtB;AACA,KARS;AAUVQ,IAAAA,SAVU,qBAUAf,KAVA,EAUMU,OAVN,EAUc;AACvBV,MAAAA,KAAK,CAACK,aAAN,GAAsB,IAAtB;AACAL,MAAAA,KAAK,CAACM,YAAN,GAAqB,IAArB;AACAN,MAAAA,KAAK,CAACG,QAAN,GAAiB,IAAjB;AACAH,MAAAA,KAAK,CAACI,MAAN,GAAe,IAAf;AACAJ,MAAAA,KAAK,CAACO,aAAN,GAAsB,KAAtB;AACA;AAhBS,GAXiB;AA8B5BS,EAAAA,OAAO,EAAE;AAEPC,IAAAA,KAFO,uBAEWP,OAFX,EAEoB;AAAA,UAAnBQ,MAAmB,QAAnBA,MAAmB;AACzBtB,MAAAA,QAAQ,CACPuB,IADD,GAECC,0BAFD,CAE4BV,OAAO,CAACW,KAFpC,EAE2CX,OAAO,CAACY,QAFnD,EAGCC,IAHD,CAIE,UAAAJ,IAAI,EAAI;AACNK,QAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;AACAtB,QAAAA,EAAE,CACD6B,UADD,CACY,OADZ,EAECC,GAFD,CAEKR,IAAI,CAACS,IAAL,CAAUC,GAFf,EAGCC,GAHD,GAICP,IAJD,CAIM,UAAAI,GAAG,EAAE;AACT,cAAII,OAAO,GAAGJ,GAAG,CAACK,IAAJ,EAAd;AACAD,UAAAA,OAAO,CAACjB,EAAR,GAAaa,GAAG,CAACb,EAAjB;AACAI,UAAAA,MAAM,CAAC,SAAD,EAAYa,OAAZ,CAAN;AACD,SARD;AASH,OAfD,EAgBCR,IAhBD,CAgBM,YAAI;AACR5B,QAAAA,MAAM,CAACsC,OAAP,CAAe,GAAf;AACD,OAlBD;AAoBD,KAvBM;AAyBPC,IAAAA,MAzBO,yBAyBWxB,OAzBX,EAyBmB;AAAA,UAAjBQ,MAAiB,SAAjBA,MAAiB;AACxBtB,MAAAA,QAAQ,CACPuB,IADD,GAECgB,OAFD,GAGCZ,IAHD,CAGM,YAAM;AACVL,QAAAA,MAAM,CAAC,WAAD,CAAN;AACAvB,QAAAA,MAAM,CAACsC,OAAP,CAAe,QAAf;AACD,OAND;AAOD;AAjCM;AA9BmB,CAAf,CAAf","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport router from \"../router\"\nimport firebase from \"firebase\"\nimport db from \"../firebase/init.js\"\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    version:null,\n    isMobile:null,\n    userRole: null,\n    userId: null,\n    userFirstName:null,\n    userLastName:null,\n    authenticated:false\n  },\n\n  mutations: {\n\n   setUser(state,payload){\n    state.userFirstName = payload.firstName;\n    state.userLastName = payload.lastName;\n    state.userRole = payload.role;\n    state.userId = payload.id;\n    state.authenticated = true;\n   },\n\n   unsetUser(state,payload){\n    state.userFirstName = null;\n    state.userLastName = null;\n    state.userRole = null;\n    state.userId = null;\n    state.authenticated = false;\n   }\n\n  },\n  actions: {\n\n    login({ commit }, payload) {\n      firebase\n      .auth()\n      .signInWithEmailAndPassword(payload.email, payload.password)\n      .then(\n        auth => {\n          console.log(auth)\n          db\n          .collection('users')\n          .doc(auth.user.uid)\n          .get()\n          .then(doc=>{\n            let newUser = doc.data();\n            newUser.id = doc.id;\n            commit(\"setUser\", newUser);\n          })\n      })\n      .then(()=>{\n        router.replace(\"/\");\n      })\n      \n    },\n\n    logout({ commit },payload){\n      firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        commit(\"unsetUser\");\n        router.replace(\"/login\");\n      })\n    }\n  },\n\n});\n\n\n"]}]}