{"remainingRequest":"D:\\projects\\sweeetonion\\node_modules\\babel-loader\\lib\\index.js!D:\\projects\\sweeetonion\\src\\store\\index.js","dependencies":[{"path":"D:\\projects\\sweeetonion\\src\\store\\index.js","mtime":1593090119560},{"path":"D:\\projects\\sweeetonion\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\projects\\sweeetonion\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKaW1wb3J0IGRiIGZyb20gIi4uL2ZpcmViYXNlL2luaXQuanMiOwpWdWUudXNlKFZ1ZXgpOwpleHBvcnQgZGVmYXVsdCBuZXcgVnVleC5TdG9yZSh7CiAgc3RhdGU6IHsKICAgIHZlcnNpb246IG51bGwsCiAgICBpc01vYmlsZTogbnVsbCwKICAgIHVzZXJSb2xlOiBudWxsLAogICAgdXNlcklkOiBudWxsLAogICAgdXNlckZpcnN0TmFtZTogbnVsbCwKICAgIHVzZXJMYXN0TmFtZTogbnVsbCwKICAgIGxvZ2dlZEluOiBudWxsCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHZlcnNpb246IGZ1bmN0aW9uIHZlcnNpb24oc3RhdGUsIHZlcnNpb25EYXRhKSB7CiAgICAgIHN0YXRlLnZlcnNpb24gPSB2ZXJzaW9uRGF0YS52ZXJzaW9uOwogICAgfSwKICAgIGF1dGhVc2VyOiBmdW5jdGlvbiBhdXRoVXNlcihzdGF0ZSwgdXNlckRhdGEpIHsKICAgICAgc3RhdGUudXNlclJvbGUgPSB1c2VyRGF0YS51c2VyUm9sZTsKICAgICAgc3RhdGUudXNlcklkID0gdXNlckRhdGEudXNlcklkOwogICAgICBzdGF0ZS51c2VyRmlyc3ROYW1lID0gdXNlckRhdGEudXNlckZpcnN0TmFtZTsKICAgICAgc3RhdGUudXNlckxhc3ROYW1lID0gdXNlckRhdGEudXNlckxhc3ROYW1lOwogICAgICBzdGF0ZS5sb2dnZWRJbiA9IHVzZXJEYXRhLmxvZ2dlZEluOwogICAgfSwKICAgIGNsZWFyQXV0aERhdGE6IGZ1bmN0aW9uIGNsZWFyQXV0aERhdGEoc3RhdGUpIHsKICAgICAgc3RhdGUudXNlclJvbGUgPSBudWxsOwogICAgICBzdGF0ZS51c2VySWQgPSBudWxsOwogICAgICBzdGF0ZS51c2VyRmlyc3ROYW1lID0gbnVsbDsKICAgICAgc3RhdGUudXNlckxhc3ROYW1lID0gbnVsbDsKICAgICAgc3RhdGUubG9nZ2VkSW4gPSBudWxsOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIGxvZ2luRGF0YSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2gsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYuc3RhdGU7CiAgICAgIGNvbnNvbGUubG9nKCJsb2cgaW4iKTsKICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGxvZ2luRGF0YS5lbWFpbCwgbG9naW5EYXRhLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb21taXQoImF1dGhVc2VyIiwgewogICAgICAgICAgYXV0aGVudGljYXRlZDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHJvdXRlci5yZXBsYWNlKCIvIik7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKHVzZXIudWlkKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgICAgICAgICBjb21taXQoImF1dGhVc2VyIiwgewogICAgICAgICAgICAgICAgdXNlckZpcnN0TmFtZTogZG9jLmRhdGEoKS5maXJzdE5hbWUsCiAgICAgICAgICAgICAgICB1c2VyTGFzdE5hbWU6IGRvYy5kYXRhKCkubGFzdE5hbWUsCiAgICAgICAgICAgICAgICB1c2VyUm9sZTogZG9jLmRhdGEoKS5yb2xlLAogICAgICAgICAgICAgICAgdXNlcklkOiBkb2MuaWQsCiAgICAgICAgICAgICAgICBsb2dnZWRJbjogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTsKICAgICAgfSk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgZmlyZWJhc2UuYXV0aCgpLnNpZ25PdXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb21taXQoImNsZWFyQXV0aERhdGEiKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb2R1bGVzOiB7fQp9KTs="},{"version":3,"sources":["D:/projects/sweeetonion/src/store/index.js"],"names":["Vue","Vuex","router","firebase","db","use","Store","state","version","isMobile","userRole","userId","userFirstName","userLastName","loggedIn","mutations","versionData","authUser","userData","clearAuthData","actions","login","loginData","commit","dispatch","console","log","auth","signInWithEmailAndPassword","email","password","then","authenticated","replace","onAuthStateChanged","user","collection","doc","uid","get","data","firstName","lastName","role","id","catch","err","message","logout","signOut","modules"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport router from \"../router\"\nimport firebase from \"firebase\"\nimport db from \"../firebase/init.js\"\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    version:null,\n    isMobile:null,\n    userRole: null,\n    userId: null,\n    userFirstName:null,\n    userLastName:null,\n    loggedIn:null\n  },\n  mutations: {\n\n    version(state, versionData){\n      state.version = versionData.version;\n    },\n\n    authUser(state, userData) {\n      state.userRole = userData.userRole;\n      state.userId = userData.userId;\n      state.userFirstName = userData.userFirstName;\n      state.userLastName = userData.userLastName;\n      state.loggedIn = userData.loggedIn;\n    },\n\n    clearAuthData(state) {\n      state.userRole = null;\n      state.userId = null;\n      state.userFirstName = null;\n      state.userLastName = null;\n      state.loggedIn = null;\n    }\n\n  },\n  actions: {\n    login({ commit, dispatch, state }, loginData) {\n      console.log(\"log in\")\n      firebase\n      .auth()\n      .signInWithEmailAndPassword(loginData.email, loginData.password)\n      .then(() => {\n        commit(\"authUser\", {\n          authenticated: true\n        });\n        router.replace(\"/\");\n      })\n      .then(()=>{\n        firebase.auth().onAuthStateChanged(user => {\n          if(user){\n            db\n            .collection('users')\n            .doc(user.uid)\n            .get()\n            .then(doc=>{\n              commit(\"authUser\", {\n                userFirstName : doc.data().firstName,\n                userLastName : doc.data().lastName,\n                userRole : doc.data().role,\n                userId: doc.id,\n                loggedIn: true\n              });\n            })\n          }\n        })\n      })\n      .catch(err=>{\n        console.log(err.message)\n      })\n    },\n\n    logout({ commit }){\n      firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        commit(\"clearAuthData\");\n      })\n    }\n  },\n  modules: {\n  }\n})\n"]}]}